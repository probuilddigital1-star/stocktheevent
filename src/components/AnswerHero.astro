---
import type { Item, EventType, GuestCount, CalculationResult } from '../lib/types';

interface Props {
  item: Item;
  event: EventType;
  guestCount: GuestCount;
  calculation: CalculationResult;
  h1: string;
}

const { item, event, guestCount, calculation, h1 } = Astro.props;
---

<section class="py-12 md:py-20">
  <div class="max-w-4xl mx-auto px-4 text-center">
    <!-- Breadcrumb -->
    <nav class="mb-8 text-sm text-[var(--chocolate-40)] animate-fade-in-up">
      <a href="/" class="hover:text-[var(--primary-dark)] transition-colors">Home</a>
      <span class="mx-2">/</span>
      <a href={`/calculators?item=${item.id}`} class="hover:text-[var(--primary-dark)] transition-colors">{item.name}</a>
      <span class="mx-2">/</span>
      <a href={`/calculators?event=${event.id}`} class="hover:text-[var(--primary-dark)] transition-colors">{event.name}</a>
    </nav>

    <!-- H1 with Display Font -->
    <h1 class="font-display text-3xl md:text-4xl lg:text-5xl font-bold text-[var(--chocolate)] mb-10 leading-tight animate-fade-in-up">
      {h1}
    </h1>

    <!-- The Big Answer Card - Golden Hour Design -->
    <div class="sunset-gradient rounded-3xl shadow-2xl p-8 md:p-12 mb-8 relative overflow-hidden animate-fade-in-up animate-delay-100 flourish-corners">
      <!-- Content -->
      <div class="relative z-10">
        <p class="text-sm uppercase tracking-widest text-white/80 mb-4">You will need approx.</p>
        <div class="text-8xl mb-6 drop-shadow-lg">{item.emoji}</div>
        <div class="font-mono-luxe text-6xl md:text-7xl lg:text-8xl font-bold text-white mb-3 text-glow answer-number">
          {calculation.unitsNeeded}
        </div>
        <div class="font-display text-xl md:text-2xl text-white/95 italic mb-4">
          {calculation.unitsDisplay} of {item.name.toLowerCase()}
        </div>
        <p id="guest-context-text" class="text-white/80 text-sm md:text-base max-w-md mx-auto">
          For a <span id="guest-count-display">{guestCount.value}</span>-guest {event.name.toLowerCase()} lasting {event.defaultDuration} hours
        </p>
        <div class="mt-4 flex items-center justify-center gap-2 text-sm text-white/80">
          <span class="material-symbols-outlined text-base">info</span>
          <span>15% buffer included</span>
        </div>
      </div>
    </div>

    <!-- Quick Stats - Glass Cards -->
    <div class="grid grid-cols-3 gap-4 max-w-xl mx-auto animate-fade-in-up animate-delay-200">
      <div class="glass-card p-5 hover:scale-105 transition-all">
        <div class="font-mono-luxe text-3xl font-bold text-[var(--chocolate)]">{calculation.totalServings}</div>
        <div class="text-xs text-[var(--chocolate-40)] font-medium uppercase tracking-wide mt-1">Total servings</div>
      </div>
      <div class="glass-card p-5 hover:scale-105 transition-all">
        <div class="font-mono-luxe text-3xl font-bold text-[var(--chocolate)]">{calculation.perPersonServings}</div>
        <div class="text-xs text-[var(--chocolate-40)] font-medium uppercase tracking-wide mt-1">Per person</div>
      </div>
      <div class="glass-card p-5 hover:scale-105 transition-all">
        <div class="font-mono-luxe text-3xl font-bold text-[var(--forest)]">+{calculation.buffer}</div>
        <div class="text-xs text-[var(--chocolate-40)] font-medium uppercase tracking-wide mt-1">Buffer {item.unit}</div>
      </div>
    </div>
  </div>
</section>
