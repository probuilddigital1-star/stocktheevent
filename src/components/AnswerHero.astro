---
import type { Item, EventType, GuestCount, CalculationResult } from '../lib/types';

interface Props {
  item: Item;
  event: EventType;
  guestCount: GuestCount;
  calculation: CalculationResult;
  h1: string;
}

const { item, event, guestCount, calculation, h1 } = Astro.props;
---

<section class="bg-gradient-to-b from-amber-50 via-orange-50/30 to-white py-12 md:py-20">
  <div class="max-w-4xl mx-auto px-4 text-center">
    <!-- Breadcrumb -->
    <nav class="mb-8 text-sm text-slate-500 animate-fade-in-up">
      <a href="/" class="hover:text-emerald-600 transition-colors">Home</a>
      <span class="mx-2">/</span>
      <a href={`/calculators?item=${item.id}`} class="hover:text-emerald-600 transition-colors">{item.name}</a>
      <span class="mx-2">/</span>
      <a href={`/calculators?event=${event.id}`} class="hover:text-emerald-600 transition-colors">{event.name}</a>
    </nav>

    <!-- H1 with Display Font -->
    <h1 class="font-display text-3xl md:text-4xl lg:text-5xl font-bold text-slate-900 mb-10 leading-tight animate-fade-in-up">
      {h1}
    </h1>

    <!-- The Big Answer Card - Redesigned -->
    <div class="bg-gradient-to-br from-amber-500 via-orange-500 to-orange-600 rounded-3xl shadow-2xl p-8 md:p-12 mb-8 relative overflow-hidden animate-fade-in-up animate-delay-100">
      <!-- Decorative circles -->
      <div class="absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"></div>
      <div class="absolute bottom-0 left-0 w-32 h-32 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2"></div>
      <div class="absolute top-1/2 left-10 w-16 h-16 bg-white/5 rounded-full hidden md:block"></div>

      <!-- Content -->
      <div class="relative z-10">
        <div class="text-8xl mb-6 drop-shadow-lg">{item.emoji}</div>
        <div class="text-6xl md:text-7xl lg:text-8xl font-black text-white mb-3 drop-shadow-sm">
          {calculation.unitsNeeded}
        </div>
        <div class="text-xl md:text-2xl text-white/95 font-medium mb-4">
          {calculation.unitsDisplay} of {item.name.toLowerCase()}
        </div>
        <p class="text-amber-100 text-sm md:text-base max-w-md mx-auto">
          For a {guestCount.value}-guest {event.name.toLowerCase()} lasting {event.defaultDuration} hours
        </p>
        <div class="mt-4 inline-block bg-white/20 text-white text-sm px-4 py-1.5 rounded-full">
          15% buffer included
        </div>
      </div>
    </div>

    <!-- Quick Stats - Integrated Design -->
    <div class="grid grid-cols-3 gap-4 max-w-xl mx-auto animate-fade-in-up animate-delay-200">
      <div class="bg-white rounded-2xl p-5 shadow-lg border border-slate-100 hover:shadow-xl hover:scale-105 transition-all">
        <div class="text-3xl font-bold text-slate-900">{calculation.totalServings}</div>
        <div class="text-xs text-slate-500 font-medium uppercase tracking-wide mt-1">Total servings</div>
      </div>
      <div class="bg-white rounded-2xl p-5 shadow-lg border border-slate-100 hover:shadow-xl hover:scale-105 transition-all">
        <div class="text-3xl font-bold text-slate-900">{calculation.perPersonServings}</div>
        <div class="text-xs text-slate-500 font-medium uppercase tracking-wide mt-1">Per person</div>
      </div>
      <div class="bg-white rounded-2xl p-5 shadow-lg border border-slate-100 hover:shadow-xl hover:scale-105 transition-all">
        <div class="text-3xl font-bold text-emerald-600">+{calculation.buffer}</div>
        <div class="text-xs text-slate-500 font-medium uppercase tracking-wide mt-1">Buffer {item.unit}</div>
      </div>
    </div>
  </div>
</section>
